<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Al-Moanes</title>
    <link
      href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }
      body {
        background: #fffdf8;
      }

      #page-loader {
        position: fixed;
        inset: 0;
        z-index: 9999;
        display: flex;
        align-items: center;
        justify-content: center;
        background: #021f16;
        transition:
          opacity 0.9s ease,
          visibility 0.9s ease;
      }

      #page-loader.hidden {
        opacity: 0;
        visibility: hidden;
        pointer-events: none;
      }

      #page-loader::before {
        content: "";
        position: absolute;
        width: 480px;
        height: 220px;
        background: radial-gradient(
          ellipse,
          rgba(6, 107, 80, 0.18) 0%,
          transparent 70%
        );
        border-radius: 50%;
        animation: breathe 3s ease-in-out infinite;
      }

      @keyframes breathe {
        0%,
        100% {
          transform: scale(0.92);
          opacity: 0.5;
        }
        50% {
          transform: scale(1.08);
          opacity: 1;
        }
      }

      .loader__wrap {
        position: relative;
        width: 340px;
        height: 127px;
        z-index: 2;
      }

      .loader__text-svg {
        width: 100%;
        height: 100%;
        opacity: 0;
        animation: textReveal 0.7s ease 0.4s forwards;
      }

      @keyframes textReveal {
        to {
          opacity: 1;
        }
      }

      .loader__anim-svg {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
        overflow: visible;
      }

      .border-path {
        fill: none;
        stroke: #3dba84;
        stroke-width: 1.8;
        stroke-linecap: round;
        stroke-linejoin: round;
        filter: drop-shadow(0 0 2px rgba(175, 245, 208, 1))
          drop-shadow(0 0 5px rgba(61, 186, 132, 0.95))
          drop-shadow(0 0 14px rgba(6, 107, 80, 0.55));
      }

      .border-dot {
        fill: #c8fce4;
        opacity: 0;
        filter: drop-shadow(0 0 4px #c8fce4)
          drop-shadow(0 0 10px rgba(142, 232, 191, 0.95));
      }

      /* DEMO ONLY */
      .demo-page {
        display: flex;
        align-items: center;
        justify-content: center;
        min-height: 100vh;
        flex-direction: column;
        gap: 14px;
      }

      .replay-btn {
        margin-top: 20px;
        padding: 11px 28px;
        background: linear-gradient(135deg, #066b50, #044d39);
        color: #e8f5ee;
        border: none;
        border-radius: 50px;
        font-size: 15px;
        cursor: pointer;
        letter-spacing: 0.06em;
      }
      .replay-btn:hover {
        opacity: 0.8;
      }
    </style>
  </head>
  <body>
    <div id="page-loader">
      <div class="loader__wrap">
        <svg
          class="loader__text-svg"
          viewBox="0 118 375 140"
          xmlns="http://www.w3.org/2000/svg"
        >
          <text
            fill="#066b50"
            xml:space="preserve"
            transform="matrix(.75 0 0 .75 -17.945961 159)"
            font-size="75.32"
            font-family="'Cormorant Garamond', Georgia, 'Times New Roman', serif"
            font-weight="400"
            letter-spacing="2"
          >
            <tspan
              y="59"
              x="67.640628 114.33424 153.64722 179.55455 240.55756 300.20497 346.89857 395.92689 438.70423"
            >
              AL MOANES
            </tspan>
          </text>
        </svg>

        <svg class="loader__anim-svg" viewBox="0 118 375 140" id="animSvg">
          <path
            class="border-path"
            id="borderPath"
            d="
              M 187.50,125.64
              L 205.62,143.75
              L 353.75,143.75
              L 353.75,169.37
              L 371.87,187.49
              L 353.75,205.61
              L 353.75,231.23
              L 205.62,231.23
              L 187.50,249.34
              L 169.38,231.23
              L  21.24,231.23
              L  21.24,205.61
              L   3.13,187.49
              L  21.24,169.37
              L  21.24,143.75
              L 169.38,143.75
              Z
            "
          />
          <circle
            class="border-dot"
            id="borderDot"
            r="3"
            cx="187.50"
            cy="125.64"
          />
        </svg>
      </div>
    </div>

    <div class="demo-page">
      <p
        style="
          color: #5a7a6d;
          font-size: 18px;
          font-family: &quot;Cormorant Garamond&quot;, serif;
        "
      >
        Your page loads here
      </p>
      <button class="replay-btn" onclick="window._replayLoader()">
        â†º Replay Animation
      </button>
    </div>

    <script>
      (function () {
        const loader = document.getElementById("page-loader");
        const path = document.getElementById("borderPath");
        const dot = document.getElementById("borderDot");
        const textSvg = document.querySelector(".loader__text-svg");
        const MIN_MS = 2800;
        let raf;

        function startAnimation() {
          if (raf) cancelAnimationFrame(raf);

          const length = path.getTotalLength();
          const duration = 2000;
          const t0 = performance.now();

          path.style.strokeDasharray = length;
          path.style.strokeDashoffset = length;
          dot.style.opacity = "0";

          function tick(now) {
            const p = Math.min((now - t0) / duration, 1);
            const e = p < 0.5 ? 4 * p * p * p : 1 - Math.pow(-2 * p + 2, 3) / 2;

            path.style.strokeDashoffset = length * (1 - e);

            const pt = path.getPointAtLength(length * e);
            dot.setAttribute("cx", pt.x);
            dot.setAttribute("cy", pt.y);
            dot.style.opacity = p > 0.01 && p < 0.99 ? "1" : "0";

            if (p < 1) raf = requestAnimationFrame(tick);
          }

          raf = requestAnimationFrame(tick);
        }

        startAnimation();

        const pageStart = performance.now();
        window.addEventListener("load", () => {
          const wait = Math.max(0, MIN_MS - (performance.now() - pageStart));
          setTimeout(() => loader.classList.add("hidden"), wait);
        });

        window._replayLoader = function () {
          loader.classList.remove("hidden");
          textSvg.style.animation = "none";
          textSvg.style.opacity = "0";
          void textSvg.offsetWidth;
          textSvg.style.animation = "textReveal 0.7s ease 0.4s forwards";
          startAnimation();
          setTimeout(() => loader.classList.add("hidden"), MIN_MS + 300);
        };
      })();
    </script>
  </body>
</html>
